# TO-DOS

## Separate Startup Composition Root Refactoring - 2025-12-06 20:48

- **Evaluate refactoring to separate Startup composition root project** - Convert AvaloniaUI to class library and create dedicated Startup exe project for DI composition. **Problem:** Current AvaloniaUI project references Infrastructure solely for DI registration (`services.AddInfrastructureServices()`), which technically violates strict Clean Architecture boundaries where UI should only depend on Application layer. However, current composition-root-at-entry-point pattern is valid and follows established practices. **Files:** QuikytLoader.AvaloniaUI/App.axaml.cs:52-66 (CreateHostBuilder with DI registration), QuikytLoader.AvaloniaUI/QuikytLoader.AvaloniaUI.csproj:34-35 (Infrastructure project reference). **Solution:** Create QuikytLoader.Startup exe project that references Application, Infrastructure, and AvaloniaUI. Startup handles all DI registration and launches Avalonia app. AvaloniaUI becomes library that only references Application. Trade-offs: Achieves architectural purity but adds boilerplate, requires static IServiceProvider in App class, complicates lifecycle management (IHost integration), and is less conventional. Best suited for larger applications with multiple composition roots or strict architectural governance. Consider implementing when project scales or multiple entry points are needed.
