<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:QuikytLoader.ViewModels"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             xmlns:i="using:Avalonia.Xaml.Interactivity"
             xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
             x:Class="QuikytLoader.Views.HomeView"
             x:DataType="vm:HomeViewModel">

    <Design.DataContext>
        <vm:HomeViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="*,Auto,Auto" Margin="40">

        <!-- Main Content -->
        <StackPanel Grid.Row="0" Spacing="24" VerticalAlignment="Center">

            <!-- Title Section -->
            <StackPanel Spacing="8">
                <TextBlock Text="YouTube to Telegram"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="{DynamicResource AccentFillColorDefaultBrush}"/>
                <TextBlock Text="Download YouTube videos and send them directly to your Telegram"
                           FontSize="14"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
            </StackPanel>

            <!-- Input Card -->
            <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="24">
                <StackPanel Spacing="20">

                    <!-- URL Input Section -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="YouTube URL"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>

                        <TextBox Text="{Binding YoutubeUrl, Mode=TwoWay}"
                                 Watermark="https://www.youtube.com/watch?v=..."
                                 FontSize="14"
                                 Height="40"
                                 VerticalContentAlignment="Center"
                                 IsEnabled="{Binding !IsProcessing}"
                                 KeyDown="TextBox_KeyDown"/>

                        <TextBlock Text="Paste a YouTube video or music URL"
                                   FontSize="12"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>

                    <!-- Download and Cancel Buttons -->
                    <Grid ColumnDefinitions="*,Auto">
                        <!-- Download Button -->
                        <Button Grid.Column="0"
                                Command="{Binding DownloadAndSendCommand}"
                                HorizontalAlignment="Stretch"
                                Height="48"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Classes="accent"
                                Margin="0,0,8,0"
                                IsDefault="False">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <ui:SymbolIcon Symbol="Download" FontSize="20"/>
                                <TextBlock Text="Download &amp; Send to Telegram"
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Cancel Button -->
                        <Button Grid.Column="1"
                                Command="{Binding CancelCommand}"
                                Height="48"
                                Width="48"
                                FontSize="16"
                                ToolTip.Tip="Cancel download">
                            <ui:SymbolIcon Symbol="Cancel" FontSize="20"/>
                        </Button>
                    </Grid>

                </StackPanel>
            </Border>

        </StackPanel>

        <!-- Progress Bar -->
        <ProgressBar Grid.Row="1"
                     Value="{Binding ProgressValue}"
                     Maximum="100"
                     Height="6"
                     Margin="0,20,0,0"
                     IsVisible="{Binding IsProgressVisible}"
                     ShowProgressText="False"/>

        <!-- Status Message -->
        <Border Grid.Row="2"
                Margin="0,16,0,0"
                Padding="12,8"
                Background="{DynamicResource LayerFillColorDefaultBrush}"
                CornerRadius="6"
                IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <ui:SymbolIcon Symbol="Alert"
                               FontSize="16"
                               Foreground="{DynamicResource AccentFillColorDefaultBrush}"/>
                <TextBlock Text="{Binding StatusMessage}"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
            </StackPanel>
        </Border>

    </Grid>

</UserControl>
