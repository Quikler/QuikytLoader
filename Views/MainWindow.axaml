<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:QuikytLoader.ViewModels"
        xmlns:ui="using:FluentAvalonia.UI.Controls"
        xmlns:i="using:Avalonia.Xaml.Interactivity"
        xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
        x:Class="QuikytLoader.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/icon.ico"
        Title="QuikytLoader"
        Width="700"
        Height="400"
        MinWidth="600"
        MinHeight="350"
        WindowStartupLocation="CenterScreen"
        CanResize="True">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid Margin="20" RowDefinitions="Auto,*,Auto,Auto,Auto">
        
        <!-- Title Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,30">
            <TextBlock Text="YouTube to Telegram"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="{DynamicResource AccentFillColorDefaultBrush}"/>
            <TextBlock Text="Download YouTube videos and send them directly to your Telegram"
                       FontSize="14"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       Margin="0,8,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Border Grid.Row="1"
                Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Padding="24">
            <StackPanel Spacing="20">
                
                <!-- URL Input Section -->
                <StackPanel Spacing="8">
                    <TextBlock Text="YouTube URL"
                               FontSize="14"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                    
                    <TextBox Text="{Binding YoutubeUrl, Mode=TwoWay}"
                             Watermark="https://www.youtube.com/watch?v=..."
                             FontSize="14"
                             Height="40"
                             VerticalContentAlignment="Center"
                             IsEnabled="{Binding !IsProcessing}">
                        <i:Interaction.Behaviors>
                            <ia:EventTriggerBehavior EventName="KeyDown">
                                <ia:InvokeCommandAction Command="{Binding DownloadAndSendCommand}"/>
                            </ia:EventTriggerBehavior>
                        </i:Interaction.Behaviors>
                    </TextBox>
                    
                    <TextBlock Text="Paste a YouTube video or music URL"
                               FontSize="12"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                </StackPanel>

                <!-- Download Button -->
                <Button Command="{Binding DownloadAndSendCommand}"
                        HorizontalAlignment="Stretch"
                        Height="48"
                        FontSize="16"
                        FontWeight="SemiBold"
                        Classes="accent">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <ui:SymbolIcon Symbol="Download" FontSize="20"/>
                        <TextBlock Text="Download &amp; Send to Telegram"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

            </StackPanel>
        </Border>

        <!-- Progress Bar -->
        <ProgressBar Grid.Row="2"
                     Value="{Binding ProgressValue}"
                     Maximum="100"
                     Height="6"
                     Margin="0,20,0,0"
                     IsVisible="{Binding IsProgressVisible}"
                     ShowProgressText="False"/>

        <!-- Status Message -->
        <Border Grid.Row="3"
                Margin="0,16,0,0"
                Padding="12,8"
                Background="{DynamicResource LayerFillColorDefaultBrush}"
                CornerRadius="6"
                IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <ui:SymbolIcon Symbol="Alert" 
                               FontSize="16"
                               Foreground="{DynamicResource AccentFillColorDefaultBrush}"/>
                <TextBlock Text="{Binding StatusMessage}"
                           FontSize="13"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
            </StackPanel>
        </Border>

        <!-- Footer -->
        <StackPanel Grid.Row="4"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0"
                    Spacing="8">
            <TextBlock Text="Made with"
                       FontSize="11"
                       Foreground="{DynamicResource TextFillColorTertiaryBrush}"/>
            <TextBlock Text="â™¥"
                       FontSize="11"
                       Foreground="{DynamicResource SystemFillColorCriticalBrush}"/>
            <TextBlock Text="for Arch users"
                       FontSize="11"
                       Foreground="{DynamicResource TextFillColorTertiaryBrush}"/>
        </StackPanel>

    </Grid>
</Window>
